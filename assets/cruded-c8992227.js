import{g as f,w as m,m as oe,n as c,i as E,C as N,o as U,p as x,u as R,q as ke,r as be,$ as q,d as k,t as qe,v as b,x as P,y as ue,z as Me,A as $,B as M,D as T,E as fe,F as A,G as V,H as de,I as Le,J as he,K as ce,L as Ce,M as se,N as G,O as J,P as C,Q as W,R as _e,S as F,T as Ae,U as De,V as H,W as X,X as Fe,Y as He,Z as Te,_ as Ee,a0 as Ve,a1 as j,a2 as Be,a3 as Se,a4 as ze,a5 as Oe,a6 as z,a7 as re,a8 as le,a9 as Re,aa as y,ab as Ie,ac as ae,s as Ne,ad as Pe,a as $e,ae as Ke,c as ne}from"./shared-833f2f45.js";const O=(s,e,t)=>({tp:s,params:t,render:()=>e}),me=()=>O("req",m.required);function pe(s,e){if(e)for(let t of e){let l=function(){this&&(i[this.name]=this.value),r(i,s)},i={},r=t.at(-1);for(let n=0;n<t.length-1;n++){let a=t[n],u=s.input(a);i[a]=u.value,u.onset(["value","off"],l)}setTimeout(l)}}class Ze extends N{inputs;constructor(e,t){T(e)&&(t=e,e={}),super(e),this.inputs=P(t),pe(this,e.bots)}view(){throw 1}get isDef(){for(let e of this.inputs)if(!e.isDef())return!1;return!0}input(e){for(let t of this.inputs)if(t.name==e||ue(t,Y)&&(t=t.input(e)))return t}errors={};setErrors(e,t){this.errors[e]=t,this.input(e)?.error(!!t)}valid(e,t=!e){if(e)return!this.inputs.some(i=>i.invalid(i.value,!0));for(let i of this.inputs){let r=i.invalid(i.value,e,t);this.setErrors(i.name,r),r&&t&&(i.focus(),t=!1)}return!Me(this.errors,i=>i&&c(i))}focus(){for(let e of this.inputs)if(!e.p.off){e.focus();break}return this}fill(e,t){return this.emit("fill",e).inputs.forEach(i=>i.fill(e,t)),this}reset(...e){for(let t of c(e)?this.inputs.filter(i=>e.includes(i.name)):this.inputs)t.visited=!1,t.value=t.def;return this}data(e,t){let i=this.inputs,r=$({},this.p.hidden);for(let l of e?i.filter(n=>t&&n.p.req||!n.isDef()):i)l.p.off||l.submit(r,e,t);return this.emit("submit",r),r}formData(e,t){let i=new FormData,r=this.data(e,t);for(let l in r)i.append(l,r[l]);return i}}function Ue(s,e){let t=[];for(let i in e){let r=M(s,i,"name");t.push(e[i]?.map(l=>k([r&&[f("b",0,r.p.text),": "],l])))}return t}class Q extends Ze{errDiv;constructor(e,t){super(e,t),this.errDiv=this.p.errorDiv||be(),this.p.outline==null&&(this.p.outline=q.oform),this.inputs.forEach(this.addInput,this)}addInput(e){e.form=this,e.onset(["value","off"],()=>{e.visited&&this.setErrors(e.name,e.invalid(e.value));let t=e.field(this).attr("edited",!e.isDef());this.p.offFN?.(t,!!e.p.off),this.emit("input",e)}),e.observeVisited(t=>this.setErrors(t.name,t.invalid(t.value)))}view(){let{p:e,inputs:t}=this;return f(e.tag||"form","_ form",[t.map(i=>i.field(this)),this.errDiv])}setErrors(e,t){super.setErrors(e,t),this.errDiv.set(Ue(this.inputs,this.errors))}}function Je(s,e,t,i=Le(),r,l){return T(e)&&(e=new Q(e)),new Promise(n=>{fe(s,f(e.set("tag","div"),"bd"),(a,u)=>[i.p({type:"submit"}).on("click",d=>{d.preventDefault(),e.valid()&&(A(d),V(u,async()=>{let v=e.data();n(await t?.(v,e)||v),a()}))}),r||de(()=>{a(),n(null)})],l,!r),e.focus()})}function We(s,e,t,i=t?.p?.labelSz){let r=x(t?.p.outline,e.outline),l=k("_ "+(r?"oi":"ii"),[(!r||e.text)&&f("label","hd",[e.text,e.tip&&qe(E(b.info),e.tip)]).css("width",`${i}%`).attr({for:e.name}),s=f(s,"bd").css("width",`${100-i}%`),!!e.req&&f("span","req","*")]);return e.off&&t?.p.offFN?.(s,!0),l}class K extends N{constructor(e){super(e),U(e.text)&&(e.text=x(m[e.name],R(e.name))),U(e.value)&&(e.value=this.def)}get name(){return this.p.name}get value(){return x(this.p.value,null)}set value(e){this.set("value",e)}fill(e,t){let i=this.p.name;i in e&&(this.value=e[i],t&&this.set("def",e[i]))}get def(){return x(this.p.def,this.null)}isDef(e=this.value,t=this.def){return t===e}isNull(e=this.value){return this.isDef(e,this.null)}visited;observeVisited(e){ke(f(this),()=>{this.visited=!0,e(this)})}error(e){return f(this).c("error",e),this}invalid(e,t,i){if(this.p.off)return null;let r=this.validate(e,t,i);return c(r)?r:null}validate(e){return this.p.req&&this.isNull(e)?[me()]:[]}#e;field(e,t){return this.#e||=We(this,this.p,e,t)}submit(e){let{name:t,value:i,submit:r}=this.p;r?r(e):e[t]=i}get null(){return null}}class je extends K{view(){var e=this.p,t;return e.input=="ta"?t=f("textarea","_ in v").p({name:e.name,id:e.name,placeholder:e.ph||""}).on("keydown",i=>{i.key=="Enter"&&(i.ctrlKey?i.preventDefault():i.stopPropagation())}):t=f("input","_ in").p({type:e.input||"text",name:e.name,id:e.name,placeholder:e.ph||""}),t.on({input:()=>{this.emit("input",t.v()),this.set("value",t.v()||null)},focus(){t.e.select()}}),this.bind(t,()=>t.e.value=e.value||"","value")}validate(e){let t=this.p,i=[];return e?(t.pattern&&!t.pattern.test(e)&&i.push(O("invalid_format",m.invalidFmt)),t.max&&e.length>t.max&&i.push(O("text_too_long","",{max:t.max})),t.min&&e.length<t.min&&i.push(O("text_too_short","",{min:t.min}))):t.req&&i.push(me()),i}}class Ge extends K{options;get active(){return M(this.options,this.p.value,this.options.key)}constructor(e,t,i=0){super(e),e.item||=r=>x(r[1],r[i]),this.options=he(t,{key:i,parse:r=>ce(r)?r:{[i]:r}})}get value(){return this.p.value}set value(e){this.p.value===e||this.set("value",e)}view(){let{p:e,options:t}=this,i=f("span"),r=f("table").on("click",({currentTarget:a,target:u})=>a!=u&&(this.set("open",!1).value=f(u).closest("tr").d())),l=k("_ menu",r),n=Ce(this,t,i,l,a=>this.value=a).attr({name:e.name});return se(this,i),this.on(a=>"value"in a&&se(this,i)),t.bind(r,{insert:a=>G(a.i,e.item(a)).d(a[t.key]),tag(a,u,d,v){let w=d.child(u);w.c(v,a),a&&l.e.scroll({top:w.p("offsetTop")-l.p("clientHeight")/2+w.p("clientHeight")/2})}}),n}option(e){return this.options.find(e)}}class Xe extends K{view(){let e=this.p,t=e.options.map(i=>oe(i)?[i]:i);return e.layout||=c(t)>3?"column":"wrap",this.bind(f("span",e.layout=="column"?"_ col":"",t.map(([i,r,l])=>f("label","cb",[f("input",{type:"radio",value:i,name:e.name,checked:i==e.value,oninput:()=>{this.set("value",i)}}),l&&E(l),r||i]))).on("click",i=>{i.altKey&&(f(i.currentTarget).queryAll("input").p("checked",!1),this.set("value",null))}),i=>{i.queryAll("input").forEach(r=>{r.checked=r.value==e.value})},"value").css("position","relative")}}class Y extends K{#e;get form(){return this.#e}set form(e){this.#e=e;for(let t of this.inputs)t.form=e}constructor(e,t){e.value=null,super(e);for(let i of this.inputs=P(t))i.onset(["value","off"],()=>{let r=f(i).attr("edited",!i.isDef());this.form.p.offFN?.(r,!!i.p.off),this.set(["value"])});pe(this,e.bots)}inputs;get def(){return J(this.inputs,e=>[e.name,e.def])}get value(){return J(this.inputs,e=>[e.name,e.value])}set value(e){this.inputs.forEach(t=>t.name in e&&(t.value=e?e[t.name]:t.null))}view(){for(let e of this.inputs)e.onset("value",()=>this.set(["value"]));return f("span","_ join",this.inputs)}fill(e,t){if(!(this.p.sub&&!(e=e[this.p.name])))for(let i of this.inputs)i.fill(e,t)}validate(e,t,i){let r=[];for(let l of this.inputs){let n=l.invalid(l.value,t,i);n&&r.push(...n),n&&i&&(l.focus(),i=!1)}return r}focus(){return this.inputs[0]?.focus(),this}submit(e,t,i){let{inputs:r,p:l}=this;l.sub&&(e=e[l.name]=l.sub=="array"?[]:{});for(let n of t&&!l.sub?r.filter(a=>i&&a.p.req||!a.isDef()):r)n.p.off||n.submit(e,t,i)}input(e){for(let t of this.inputs)if(t.name==e||ue(t,Y)&&(t=t.input(e)))return t}isDef(e=this.value,t=this.def){for(let i of this.inputs)if(!i.isDef(e[i.name],t[i.name]))return!1;return!0}}class Qe extends N{view(){let e=this.p,t,i=f("span"),r;if(e.setlimit)var l=new Ge({value:e.limit,fluid:!0,clear:!1},[e.min,e.min*5,e.min*10,e.min*10,e.min*20,[0,m.showAll]]);return this.bind(k("_ bar pag",[e.extreme&&H(b.first,null,()=>this.set("pag",1)),H(b.prev,null,()=>this.set("pag",e.pag-1)),f("span","hd").css({textAlign:"center"}),H(b.next,null,()=>this.set("pag",e.pag+1)),e.extreme&&H(b.last,i,()=>this.set("pag",t)),l&&[f("hr"),l.onset("value",({value:n})=>{this.set("limit",n)})],f("hr"),r=f("span","hd")]),n=>{r.set(`${Math.min(e.total-e.limit*(e.pag-1),e.limit||e.total)||0} / ${e.total||0}`),t=e.limit?Math.ceil((e.total||0)/e.limit):1,n.c("off",!!(t<2&&e.hideOnSingle));let a=e.extreme?0:1;n.child(2-a).set(e.pag),n.childs(0,2-a).p("disabled",e.pag==1),n.childs(3-a,5-a*2).p("disabled",e.pag==t),i.set(t)})}get pags(){let{limit:e,total:t}=this.p;return e?Math.ceil((t||0)/e):1}}function Ye(s,e,t=e){let i=new Qe({pag:s.pag,min:s.limit,limit:s.limit,extreme:t,setlimit:e}).on(r=>{"pag"in r&&(s.pag=r.pag,"limit"in r||s.update()),"limit"in r&&(s.limit=r.limit)});return s.on(([r])=>i.set({total:r,limit:s.limit,pag:s.pag})),i}class et extends N{get cols(){return this.p.cols}data;form;constructor(e,t){super(e),this.data=he(t,{g:e.single?null:["on"],key:e.key,clear:!0}),e.head||=i=>x(x(i.text,m[i.key]),R(i.key))}ccss(e,t,i=1){let r=0;if(Oe(t)){let l=this.cols,n=t,a=0;for(t=l[t];a<i;a++)r+=l[n+a].size}else r=t.size;return e.c("i").css({width:r+"px",textAlign:t.align})}view(){let e=this.p,t=e.cols,i=e.allColumns,r=e.reqColumns,l=this.data,n,a=i&&X(null,i.map(o=>j(t.includes(o),x(x(o.text,m[o.key]),R(o.key)),h=>{h?(t.push(o),t.sort((p,g)=>i.indexOf(p)-i.indexOf(g))):t.remove(o)},o.key,r&&r.includes(o.key)))).on("click",o=>A(o)),u=t.bind(k("hd _ tr",z(e.corner,"sd")),{insert:(o,h,p)=>{let g=this.ccss(z(e.head(o),"i"),o).uncss("textAlign");e.resize&&k("div").addTo(g).on("mousedown",S=>{A(S);let L=t.indexOf(o)+1;if(!e.fill||L<c(t)){let te=function(ie){if(o.size=o.size=Math.max(q.rem*2,ie.clientX-g.rect.left),ee.css({width:o.size+"px"}),Z){let xe=t[L].size=Math.max(q.rem*2,we-ie.clientX);Z.css({width:xe+"px"})}},ee=w.childs().child(L),Z=e.fill&&ee.next(),ye=Z?.e?.(0),we=ye?.rect?.right;re().css({cursor:"col-resize",userSelect:"none"}),le().on("mousemove",te).one("mouseup",()=>{le().off("mousemove",te),re().uncss("cursor","userSelect")})}}),e.sort&&g.on("click",()=>{t.tag("sort")==o?o.desc?(o.desc=!1,t.tag("sort",null)):(o.desc=!0,t.retag("sort")):(o.desc=!1,t.tag("sort",o))}),a&&g.on({mouseenter(){clearTimeout(n),g.add(a)},mouseleave(){n=setTimeout(()=>a.remove().child(".menu")?.remove(),300)}}),p.place(h+1,g)},tag(o,h,p,g,S){let L=p.child(h+1);switch(g){case"sort":L.child(".sort")?.remove(),o&&L.add(E(b[S.desc?"desc":"asc"]).c("sort")),e.sort.call(S,o);break;default:L.c(g,o)}},remove(o,h,p){p.unplace(h+1)},clear(o){o.childs(1).remove()}}),d=o=>f(o(this),"_ ft tr"),v=e.foot&&Re(...e.foot.map(d)),w=k("_ tb",[u,v]).on("click",o=>o.target==o.currentTarget&&y.clear(l,"on")).p("tabIndex",0).on("keydown",o=>{st(l,o,e)&&A(o)}),B=o=>[k("sd"),t.map(h=>this.ccss(z(h.fmt?h.fmt(o[h.key],e.p,o):o[h.key]),h))];return l.bind(w,{insert:(o,h)=>{let p=k("_ tr i",B(o));w.place(h+1,it(e.style?.(p,o,h)||p,o,l,e))},reload(o,h){w.child(h+1).set(B(o))},tag:(o,h,p)=>{let g=p.child(h+1).c("crt",o).e;o&&g.scrollIntoView({block:"nearest",inline:"nearest"})},remove(o,h,p){p.unplace(h+1)},clear(o){o.childs().slice(1).remove()},groups(o,h,p,g){p.child(h+1).c(g,o)}}),t.on(()=>{this.data.reloadAll(),v?.eachS((o,h)=>o.replace(d(e.foot[h])))}),e.resize&&w.c("brd"),w}fillArea(e=2*q.rem){let t=this.p.cols,i=f(this),r=i.childs();console.log(e,i.e.clientWidth),tt(t,i.e.clientWidth-2-e);for(let l=0;l<c(t);l++)r.child(l+1).css({width:t[l].size+"px"})}}function tt(s,e=100){let t=0,i=s.length,r=[];for(let l of s){let n=l.size||1/i;r.push(n),t+=n}for(let l=0;l<i;l++)s[l].size=r[l]/t*e}function it(s,e,t,i){let r=l=>y.add(t,"on",e,y.tp(l.ctrlKey,l.shiftKey));return s.on({click:r,dblclick:i.open&&(()=>i.open(...y.list(t,"on"))),contextmenu:i.menu&&(l=>{r(l);let n=i.menu(y.list(t,"on"));n&&Ie(l,n)})})}const _=(s,e,{ctrlKey:t,shiftKey:i})=>i?y.move(s,"on",e,y.tp(t,!1)):t?y.movePivot(s,"on",e):y.move(s,"on",e,"set");function st(s,e,t,i){switch(e.key){case"Delete":let r=y.list(s,"on");if(r.length&&t.remove)(async()=>{if(await t.remove(r)!==!1)for(let l of r)s.remove(l)})();else return;break;case"Home":_(s,-y.pivot(s,"on"),e);break;case"End":_(s,s.length-y.pivot(s,"on"),e);break;case"PageDown":_(s,10,e);break;case"PageUp":_(s,-10,e);break;case"Enter":if(t.open){t.open(...y.list(s,"on"));break}else return;case"ArrowUp":if(i)return;_(s,-1,e);break;case"ArrowDown":if(i)return;_(s,1,e);break;default:return}return!0}class rt{#e;#t;#i;list;readOnly;length;task;fromStorage;toStorage;src;all;groupBy;sort;queryBy;fields;w;constructor(e,t={}){T(t)&&(t={fields:t}),this.src=e,this.#i=x(t.limit,q.defLimit),this.#t=t.pag||1;let i=()=>{this.#t=1,this.update(!0)};this.query=t.query,this.sort=F(t.sort,{parse:r=>oe(r)?[r]:r,key:0}).on(i),this.fields=F(t.fields||P(e.fields.map(r=>C(r.get)&&r.name)),r=>{if(!M(e.fields,r,"name"))throw He(r,"field",e);return r}).on(()=>this.update(!0)),this.queryBy=F(t.queryBy||e.fields.filter(r=>r.query).map(r=>r.name)).on(i),this.w=T(t.where)?J(t.where,(r,l)=>[l,r]):t.where}get pags(){return this.#i?Math.ceil(this.length/this.#i):1}get query(){return this.#e}set query(e){e!=this.#e&&(this.#t=1,this.#e=e,this.update(!0))}get pag(){return this.#t}set pag(e){e<1?e=1:e>this.pags&&(e=this.pags),this.#t!=e&&(this.#t=e,this.update())}get limit(){return this.#i}set limit(e){this.#i!=e&&(this.#t=e?Math.ceil(this.#i*this.#t/e):1,this.#i=e,this.update())}ids(){let e=this.src;if(this.pags>1){let t=this.toJSON();return e.get({tp:"col",fields:[e.id],where:t.where,query:t.query,queryBy:t.queryBy})}else return this.list.map(t=>e.id||t.id)}where(e,t){return(this.w||={})[e]!==t&&(t?this.w[e]=t:delete this.w[e],this.update(!0)),this}bind(e){if(!this.list){let t=this.src;(this.list=T(e)?e:F(e)).key=t.id,(t.bonds||=[]).push(new WeakRef(this)),this.update()}return this.list}getAll(e="rows"){return this.src.get($(this.toJSON(),{tp:e,limit:void 0,pag:void 0}))}#s;#r;update(e){let t=async()=>{let i={},r={},l=this.list,n=this.#l;if(l||n){let a=this.src,u=await(this.task=a.get(this.toJSON(),(this.#s=new AbortController).signal));if(this.task=this.#s=null,this.length=u[0],l){for(let d in l.tags)l.tags[d]&&(i[d]=l.tags[d].v[a.id]);for(let d in l.g)r[d]=l.g[d].keyField();l.set(u[1]);for(let d in i)l.tag(d,i[d]);for(let d in r){let v=r[d];l.g[d].set(l.filter(w=>v.indexOf(w[a.id||"id"])!=-1))}}if(n)for(let d of n)d(u);return u}};return this.#s?.abort(),clearTimeout(this.#r),this.task=null,e?(this.#r=setTimeout(t),this):t()}#l;on(e){return(this.#l||=[]).push(e),this}toJSON(){let{query:e,queryBy:t,fields:i,w:r,sort:l,src:n,limit:a,pag:u}=this;return{tp:"full",fields:!c(i)||c(n.fields)==c(i)?void 0:i.map(d=>{let v=M(n.fields,d,"name").exp;return v?[d,v]:d}),where:r&&Object.values(r),limit:a,pag:u==1?void 0:u,query:e||void 0,queryBy:e&&c(t)?t:void 0,sort:l.length?l:void 0}}}const lt=s=>f("label","_ in",[Te(f("input",{type:"search",name:`${s.src}_search`,value:s.query||"",placeholder:m.search+"..."}),"input",500,function(){s.query=this.value}),Ee(b.search,null,()=>s.update())]);function at({queryBy:s,src:e}){let t=e.fields.filter(r=>r.query);if(!t.length)return null;let i=Ve([j(c(t)==c(s)?!0:c(s)?null:!1,m.all,r=>s.set(r&&t.map(l=>l.name)),"all"),Be(),...t.map(r=>j(s.includes(r.name),x(r.text,R(r.name)),l=>l?s.push(r.name):s.remove(r.name),r.name))]);return s.on(()=>{i.query("#all").p({checked:c(t)==c(s),indeterminate:c(s)&&c(t)!=c(s)});for(let r of i.queryAll("input:not(#all)"))r.checked=s.includes(r.id)}),X(null,()=>i)}function nt(s,e){let t=s.bind(),i=f("input",{type:"checkbox"}).on("input",()=>{i.p("checked")?(y.addAll(t,"on"),i.p({checked:!0,indeterminate:!1}),s.all=void 0,V(f(e),async()=>{let r=await s.getAll();U(s.all)&&(s.all=r)},null,250)):y.clear(t,"on")});return y.onchange(t,"on",(r,l)=>{s.all=null,i.p({checked:!!r,indeterminate:!!r&&(s.pags>1||(l?l.length<t.length:t.length>1))})}),i}const ot={null:()=>k(0,E(b.null)),invalidIcon:()=>E("image-broken"),checkboxFmt:"icon",wrap:z,html:!0,interactive:!0,format:!0};function ut(s,e={}){let t=s.src,i=t.fields.filter(u=>C(u.get)),r=i.map(u=>({dt:u.dt,key:u.name,text:u.text,size:(u.size||10)*q.rem,align:u.align,fmt:u.out?.bind(u)}));c(s.fields)||s.fields.set(W(i,"name"));let l=F(s.fields.map(u=>M(r,u,"key")));Se(l,s.fields,!1,u=>u.key);let n=f("span"),a=new et({cols:l,fill:e.fill,resize:!0,single:e.single,style:e.style||t.style,p:e.p||ot,corner:n,menu:e.menu&&(u=>e.menu(s.all||u,s,a)),open:u=>ge(t,u?.id),remove:u=>ve(t,W(u,t.id||"id")),allColumns:r,reqColumns:e.req||[t.main],key:t.id||"id",sort:{clear:!0,call({key:u,desc:d},v){s.sort.set(v&&[[u,d]])}}},s.bind());return n.add(nt(s,f(a))),a}async function ft(s,e){return s.mdform?s.mdform():(e||=s.form?await s.form(s):new Q(s.fields.map(t=>t.set&&t.in())),Je([0,I(m.newItemTitle,{src:s.s})],e,t=>s.post([t])))}async function ge(s,e,t){let i=await s.get({tp:"row",where:[`${s.id}='${e}'`],src:!0});if(s.mdform)return s.mdform(i);fe([0,I(m.editItemTitle,{src:s.s,item:f("strong",0,i[s.main])})],(t||=s.form?await s.form(s,!0):new Q(s.fields.map(r=>x(r.edit,r.set)&&r.in()))).set("tag","div").fill(i,!0),(r,l)=>[ae(m.save,async n=>{A(n),t.valid()&&await V(l,()=>s.put([$(t.data(!0),{id:e})])),r()},"submit").c("accept"),s.post&&ae(m.duplicate,async n=>{A(n),t.valid()&&await V(l,()=>s.post([t.data()])),r()},"submit"),de(r)]),t.focus()}function I(s,e){if(s){let t=[],i=/{(\w+)}/g,r,l=0;for(;r=i.exec(s);)t.push(s.slice(l,l=r.index),e[r[1]]),l+=c(r[0]);return t.push(s.slice(l,c(s))),P(t)}}async function ve(s,e){let t=c(e),i=e[0]?.[s.main];await ze(t==1&&i?I(m.confirmRemove,{src:s.s,item:f("strong",0,i)}):I(m.confirmRemoveMany,{src:t==1?s.s:s.p,count:t}))&&await s.del(e.map(r=>ce(r)?r[s.id]:r))}function dt(s,e){return G(b.remove,m.remove,()=>ve(s,e),q.sc?.remove,!c(e)||!s.del)}function ht(s,e){return G(b.edit,m.edit,()=>ge(s,e[0][s.id]),q.sc?.edit,c(e)!=1||!s.put)}function ct(s,{src:e}){return[ht(e,s),dt(e,s)]}async function mt(s,e={}){let t=s.src,i=ut(s,{menu:Ae(e.menu)?e.menu:ct,single:e.single});return[k("_ bar",[lt(s),at(s),De(),await e.options?.(s,i),C(e.add)&&t.post&&H(b.plus,`${m.add} ${t.s||""}`,()=>ft(t)).id("add"),e.more&&X(null,e.more,"vs")]),f(i).css("flex",1),f(Ye(s,!0),0,[f("hr","r"),e.totals&&(()=>{let r=k("_ bar",e.totals);return s.on(()=>r.set(e.totals)),r})()])]}const D=(s,{req:e,def:t,text:i,query:r,input:l,set:n})=>({name:s,set:C(n),text:i,in:()=>new je({name:s,input:l,req:e,def:t,text:i}),query:C(r)}),pt=(s,e,{req:t,def:i,text:r,set:l,query:n})=>({name:s,set:C(l),text:r,in:()=>new Xe({name:s,req:t,def:i,text:r,options:e}),query:C(n),out:(a,u)=>a==null?u.null:M(e,a,0)[1]});function gt(s,e,t="id",i=t=="id"){let r=1;return{id:t,fields:e,get(l){return new Promise(n=>{let a=s;if(l.where?.length&&(a=s.filter(d=>!0)),l.sort){a===s&&(a=a.slice());for(let d of l.sort){let[v,w]=Fe(d),B=w?1:-1;a.sort((o,h)=>{let p=o[v],g=h[v];return p==g?0:(p>g?1:-1)*B})}}let u=c(a);if(l.limit){let d=l.pag||1;a=a.slice((d-1)*l.limit,d*l.limit)}switch(l.tp||"rows"){case"full":n([u,a]);break;case"rows":n(a);break;case"col":n(W(a,l.fields[0]));break;case"row":n(a[0]);break;case"one":n(x(a[0]?.[l.fields[0]],null));break;default:throw"not supported"}})},post(l){let n=Array(c(l));for(let a of l){if(a[t]==null)if(i)a[t]=r++;else throw"invalid";if(M(s,a[t],t))throw"invalid";n.push({[t]:a[t]}),s.push(a)}return n},put(l){for(let n of l){let a=M(s,n.id,t);if(a)for(let u in n)a[u]=n[u];else console.warn(`item of id '${n.id}' not found`)}},del(l){for(let n of l){let a=_e(s,n,t);a!=-1&&s.splice(a,1)}}}}$(b,{plus:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",prev:"M14,7L9,12L14,17V7Z",next:"M10,17L15,12L10,7V17Z",first:"M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z",last:"M16,18H18V6H16M6,18L14.5,12L6,6V18Z",dd:"M7,10L12,15L17,10H7Z",search:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",edit:"M18.62,1.5C18.11,1.5 17.6,1.69 17.21,2.09L10.75,8.55L14.95,12.74L21.41,6.29C22.2,5.5 22.2,4.24 21.41,3.46L20.04,2.09C19.65,1.69 19.14,1.5 18.62,1.5M9.8,9.5L3.23,16.07L3.93,16.77C3.4,17.24 2.89,17.78 2.38,18.29C1.6,19.08 1.6,20.34 2.38,21.12C3.16,21.9 4.42,21.9 5.21,21.12C5.72,20.63 6.25,20.08 6.73,19.58L7.43,20.27L14,13.7",remove:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"});Ne({pt:{hi:"Ola, meu nome é",fname:"Primeiro Nome",lname:"Ultimo Nome",addr:"Endereço",add:"Adicionar",gender:"Género",genderF:"Femenino",genderM:"Masculino",confirm:"Confirmar",cancel:"Cancelar",crudTitle:"CRUD simples com suporte para inserção, modificição e remosão de dados",required:"Obrigatorio",edit:"Editar",remove:"Remover",save:"Salvar",search:"Pesquisar",duplicate:"Duplicar"},en:{hi:"Hi, my name is",fname:"First Name",lname:"Last Name",addr:"Address",add:"Add",search:"Search",cancel:"Cancel",confirm:"Confirm",required:"Required",crudTitle:"Simple crud with suport to add, edit and remove.",gender:"Género",genderF:"Female",genderM:"Male",edit:"Edit",remove:"Remove",save:"Save",duplicate:"Duplicate"}});const vt=gt(Pe,[D("fname",{req:!0,text:m.fname}),D("lname",{req:!0,text:m.lname}),D("email",{input:"email"}),D("tel",{input:"tel"}),pt("gender",[["F",m.genderF],["M",m.genderM]],{text:m.gender}),D("addr",{text:m.addr})]);$e("cruded",[f("h2",[m.crudTitle]),V(()=>mt(new rt(vt,{limit:10}))),f("h3",{id:"install"},ne("Instalation","Instalação")),f("p",0,"npm i cruded"),f("h3",{id:"sample"},ne("Sample","Exemplo")),Ke(`
import { crud, fromArray, fText,fRadio } from "cruded";
import { get } from "galho";

const list = [
  { id: 1, fname: "Bobette", lname: "Oldroyde", gender: "F", addr: "Room 1396", tel: "508-974-4484" },
  { id: 2, fname: "Quincey", lname: "Livermore", gender: "M", addr: null, tel: null },
  { id: 3, fname: "Billye", lname: "Boutcher", gender: "F", addr: "7th Floor", tel: "472-985-4634" },
  { id: 4, fname: "Ardine", lname: "Bontine", gender: "F", addr: "Suite 63", tel: "620-502-4286" },
  { id: 5, fname: "Clayton", lname: "Dunkley", gender: "M", addr: "16th Floor", tel: "698-922-1909" },
];

//create datasource from array
const src = fromArray(list, [
  fText("fname", { req: true, text: w.fname }),
  fText("lname", { req: true, text: w.lname }),
  fText("tel", { input: "tel" }),
  fRadio("gender", [["F", w.genderF], ["M", w.genderM]], { text: w.gender }),
  fText("addr", { text: w.addr }),
]);

//create bond to datasource, limit:10 define number of item per pag
const bond=new Bond(src, { limit: 10 });

//render crud component, limit
const myCrud = crud(bond);

//add crud to document.body
get("body").add(myCrud);`)]);
